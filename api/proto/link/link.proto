syntax = "proto3";
package linkpb;

option go_package = "github.com/turbo514/shortenurl-v2/shared/gen/proto/linkpb";

import "google/protobuf/duration.proto";

service LinkService {
    rpc CreateLink(CreateLinkRequest) returns (CreateLinkResponse);
    rpc ResolveLink(ResolveLinkRequest) returns (ResolveLinkResponse);
}

message CreateLinkRequest {
    string tenant_id = 1;
    string user_id = 2;
    string original_url = 3;
    google.protobuf.Duration expiration = 4;
}

message CreateLinkResponse {
    string original_url = 1;
    string short_code = 2;
}

message ResolveLinkRequest {
    string short_code = 1;
    bytes ip_address = 2;
    string user_agent = 3;
    string referrer = 4;
}

message ResolveLinkResponse {
    string original_url = 1;
}